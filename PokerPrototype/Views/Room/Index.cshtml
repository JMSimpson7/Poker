
@{
    ViewBag.Title = "Index";
}
@section topright{
    <li class="dropdown">
    </li>
}

@section styles{
    <style>
            background-image: url(https://www.google.com/url?sa=i&rct=j&q=&esrc=s&source=images&cd=&ved=0ahUKEwimto3W17XQAhVl1oMKHUPLBckQjBwIBA&url=https%3A%2F%2Fimages-na.ssl-images-amazon.com%2Fimages%2FG%2F01%2Fimg15%2Fpet-products%2Fsmall-tiles%2F23695_pets_vertical_store_dogs_small_tile_8._CB312176604_.jpg&psig=AFQjCNF5cbdZP7j6yAiYUIFz9bnZ6D5vKw&ust=1479674624536879) no-repeat center center fixed;
    </style>
}
<h2>Room #@ViewBag.roomid</h2>

<input id="message"></input>
<button id="message-btn" disabled>Send Message</button>


@section scripts{
    <script src="http://ajax.aspnetcdn.com/ajax/signalr/jquery.signalr-2.1.0.min.js"></script>
    <script src="~/signalr/hubs"></script>
    <script>
    var chat = $.connection.myHub;

    chat.client.alertMessage = function (msg) {
        alert(msg);
    }

    chat.client.alertJson = function (model) {
        alert(JSON.stringify(model))
    };
    $.connection.hub.start().done(initConnect).fail(function (reason) {
            console.log("SignalR connection failed: " + reason);
    });
    function initConnect() {
        alert("connection established")
        $('#message-btn').prop("disabled", false).click(function () {
            chat.server.send($("#message").val());
        });
    }
    </script>

}